<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Painel de Desempenho — CTI 2026</title>
  <meta name="description" content="Acompanhe sua evolução, pontos fortes e fracos por disciplina e tema. Exporte ou importe seu histórico."/>
  <link rel="icon" href="/favicon.ico"/>
  <link rel="stylesheet" href="/assets/css/base.css"/>
  <link rel="stylesheet" href="/assets/css/layout.css"/>
  <link rel="stylesheet" href="/assets/css/componentes.css"/>
  <link rel="stylesheet" href="/assets/css/dark.css" media="(prefers-color-scheme: dark)"/>
  <style>
    .grid-2 { display:grid; gap:1rem; grid-template-columns: 1fr; }
    .grid-3 { display:grid; gap:1rem; grid-template-columns: 1fr; }
    @media (min-width: 900px){ .grid-2 { grid-template-columns: 1fr 1fr; } }
    @media (min-width: 1100px){ .grid-3 { grid-template-columns: 1fr 1fr 1fr; } }
    canvas { width:100%; height:260px; border:1px solid var(--border); border-radius: var(--radius-sm); background:#fff; }
    .kpis { display:flex; gap:.5rem; flex-wrap:wrap; }
    .kpi { border:1px solid var(--border); border-radius: var(--radius-sm); padding:.5rem .75rem; }
    dialog { border:1px solid var(--border); border-radius:var(--radius); padding:1rem; max-width: 640px; width: 90%; }
    dialog::backdrop { background: rgba(0,0,0,.2); }
  </style>
</head>
<body>
  <a class="skip-link" href="#conteudo">Pular para o conteúdo</a>
  <header class="site-header" role="banner">
    <div class="container header-wrap">
      <a class="brand" href="/" aria-label="Página inicial">
        <img src="/assets/img/logo.svg" alt="" width="36" height="36"/>
        <span class="brand-name">CTI 2026</span>
      </a>
      <nav class="site-nav site-nav--desktop" aria-label="Seções principais">
        <ul>
          <li><a href="/simulados/" class="nav-link" aria-current="page">Simulados</a></li>
          <li><a href="/aulas/" class="nav-link">Aulas</a></li>
          <li><a href="/redacao/" class="nav-link">Redação</a></li>
          <li><a href="/recursos/" class="nav-link">Recursos</a></li>
        </ul>
      </nav>
      <nav class="site-nav--mobile nav-mobile" aria-label="Menu principal (mobile)">
        <details class="menu"><summary class="nav-toggle">Menu</summary>
          <ul class="menu-list">
            <li><a href="/simulados/" class="nav-link" aria-current="page">Simulados</a></li>
            <li><a href="/aulas/" class="nav-link">Aulas</a></li>
            <li><a href="/redacao/" class="nav-link">Redação</a></li>
            <li><a href="/recursos/" class="nav-link">Recursos</a></li>
          </ul>
        </details>
      </nav>
    </div>
  </header>

  <nav class="breadcrumb" aria-label="Caminho de navegação">
    <ol>
      <li><a href="/">Início</a></li>
      <li><a href="/simulados/">Simulados</a></li>
      <li aria-current="page">Painel de Desempenho</li>
    </ol>
  </nav>

  <main id="conteudo" class="section">
    <div class="container">
      <h1 class="h2">Painel de Desempenho</h1>
      <p class="text-muted">Veja sua evolução, seus pontos fortes por disciplina e os temas a reforçar. Todos os dados ficam no seu navegador.</p>

      <div class="kpis">
        <span class="kpi"><strong id="k-sessions">0</strong> sessões</span>
        <span class="kpi"><strong id="k-answered">0</strong> questões analisadas</span>
        <span class="kpi"><strong id="k-avg">0%</strong> acerto médio</span>
        <span class="kpi"><strong id="k-time">00:00:00</strong> tempo acumulado</span>
      </div>

      <div class="grid-2" style="margin-top:1rem;">
        <div class="card">
          <h2 class="h4">Evolução (acerto por sessão)</h2>
          <canvas id="ch-evol" width="640" height="280"></canvas>
        </div>
        <div class="card">
          <h2 class="h4">Média por disciplina</h2>
          <canvas id="ch-disc" width="640" height="280"></canvas>
        </div>
      </div>

      <div class="grid-2" style="margin-top:1rem;">
        <div class="card">
          <h2 class="h4">Temas a reforçar</h2>
          <ul id="weak-list" class="list"></ul>
          <p class="text-muted">Criterio: piores 5 com pelo menos 5 tentativas.</p>
          <div class="btn-row">
            <a class="btn btn--primary" href="/simulados/por-tema.html">Treinar por tema</a>
            <a class="btn btn--outline" href="/simulados/revisoes-rapidas.html">Revisões rápidas</a>
          </div>
        </div>
        <div class="card">
          <h2 class="h4">Histórico</h2>
          <div class="btn-row" style="margin-bottom:.5rem;">
            <button class="btn btn--primary" id="btn-export" type="button">Exportar histórico (.json)</button>
            <label class="btn btn--outline" for="btn-import" style="cursor:pointer;">Importar</label>
            <input id="btn-import" type="file" accept="application/json" style="display:none;"/>
            <button class="btn btn--ghost" id="btn-clear" type="button">Limpar histórico</button>
          </div>
          <div id="sess-table"></div>
        </div>
      </div>
    </div>
  </main>

  <dialog id="sess-detail">
    <h3 class="h4">Detalhes da sessão</h3>
    <div id="sess-detail-body"></div>
    <div class="btn-row" style="margin-top:.75rem;">
      <form method="dialog"><button class="btn btn--primary">Fechar</button></form>
    </div>
  </dialog>

  <footer class="site-footer">
    <div class="container footer-wrap">
      <p>© 2025–2026 • Projeto CTI 2026.</p>
    </div>
  </footer>

  <script src="/assets/js/storage.js" defer></script>
  <script src="/assets/js/analytics.js" defer></script>
  <script defer>
    document.addEventListener('DOMContentLoaded', () => {
      CTIAnalytics.init();
    });
  </script>
</body>
</html>